(function(e,t,n,r){function u(n,r){this.element=n;this.options=e.extend({},o,r);this._defaults=o;this._name=s;this.elements=e(this.element).find(this.options.panel).size();this.panelWidth=e(this.element).find(this.options.panel).outerWidth(true);this.panelHeight=e(this.element).find(this.options.panel).outerHeight(true);this.sizeRatio=this.panelHeight/this.panelWidth;if(this.options.responsive){e(this.element).width("100%");this.resize();var i=this;e(t).resize(function(e){i.resize()})}this.currentPosition=this.options.start;this.timerval=null;this.init()}var s="panels",o={panel:"",speed:1e3,wait:3e3,resumeOnClick:true,autoScroll:true,infinite:false,responsive:false,start:0,showArrows:false,showMarkers:false,animation:"fade",arrowLeftClass:"arrowLeft",arrowRightClass:"arrowRight",leftArrow:"",rightArrow:"",markerHolderClass:"",markerClass:"",markerActiveClass:"",showMarkerNumbers:false,panelsPerScreen:1,panelsToMove:1,vertical:false,onSetupComplete:function(e,t){},onSlideChange:function(e,t){}};u.prototype={init:function(){var t=this;if(this.currentPosition>=this.elements||this.currentPosition<0){this.currentPosition=0}e(this.element).css("position","relative");switch(this.options.animation){case"slide":if(this.options.vertical){e(this.element).children(this.options.panel).wrapAll('<div class="mask" style="position:relative; overflow:hidden; width: '+this.panelWidth+"px; height: "+this.panelHeight*this.options.panelsPerScreen+'px;"><div class="scroller" style="position:absolute; zoom:1; width: '+this.panelWidth+"px; height: "+(this.panelHeight*this.elements+20)+'px;"></div></div>');e(this.element).find(".scroller").css("top",this.panelHeight*this.currentPosition*-1+"px");e(this.element).find(this.options.panel).css({position:"relative"})}else{e(this.element).children(this.options.panel).wrapAll('<div class="mask" style="position:relative; overflow:hidden; width: '+this.panelWidth*this.options.panelsPerScreen+"px; height: "+this.panelHeight+'px;"><div class="scroller" style="position:absolute; zoom:1; width: '+(this.panelWidth*this.elements+20)+"px; height: "+this.panelHeight+'px;"></div></div>');e(this.element).find(".scroller").css("left",this.panelWidth*this.currentPosition*-1+"px");e(this.element).find(this.options.panel).css({position:"relative","float":"left"})}if(this.options.infinite){e(this.element).find(this.options.panel).addClass("hidden").hide();e(this.element).find(this.options.panel).eq(this.currentPosition).clone().insertBefore(e(this.element).find(this.options.panel+":first")).removeClass("hidden").addClass("infinite").show()}break;default:e(this.element).children(this.options.panel+":not(:eq("+this.currentPosition+"))").hide()}if(this.options.showArrows){if(this.elements>1){var n="";var r="";if(this.options.leftArrow.length>0){n='<img src="'+this.options.leftArrow+'" />'}if(this.options.rightArrow.length>0){r='<img src="'+this.options.rightArrow+'" />'}var s='<a class="'+this.options.arrowLeftClass+'" href="#">'+n+'</a><a class="'+this.options.arrowRightClass+'" href="#">'+r+"</a>";e(this.element).append(s);this.options.arrowLeftClass="."+this.options.arrowLeftClass;this.options.arrowRightClass="."+this.options.arrowRightClass;e(this.element).children(this.options.arrowLeftClass).click(function(){t.currentPosition=t.movePanel(t.element,t.options,-1,true,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(0)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}return false});e(this.element).children(this.options.arrowRightClass).click(function(){t.currentPosition=t.movePanel(t.element,t.options,1,true,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(1)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}return false})}}if(this.options.showMarkers){if(this.elements>1){var o='<ul class="'+this.options.markerHolderClass+'">';for(i=0;i<this.elements;i++){o+='<li><a href="#" class="'+this.options.markerClass+'">';if(this.options.showMarkerNumbers){o+=i+1}o+="</a></li>"}o+="</ul>";e(this.element).append(o);this.options.markerHolderClass="."+this.options.markerHolderClass;e(this.element).children(this.options.markerHolderClass).children("li:eq("+this.currentPosition+")").children("a").addClass(this.options.markerActiveClass);e(this.element).children(this.options.markerHolderClass).children("li").children("a").click(function(){var n=e(this).parent("li");var r=e(t.element).children(t.options.markerHolderClass).children("li").index(n);t.currentPosition=t.movePanel(t.element,t.options,0,true,r);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(1)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}return false})}}var u,a,f,l,c;if(this.element.addEventListener){this.element.addEventListener("touchstart",function(e){u=e.changedTouches[0].pageX;a=e.changedTouches[0].pageY},false);this.element.addEventListener("touchmove",function(e){f=e.changedTouches[0].pageX;l=e.changedTouches[0].pageY;if(Math.abs(f-u)>Math.abs(l-a)){e.preventDefault()}},false);this.element.addEventListener("touchend",function(n){if(Math.abs(u-f)>Math.abs(a-l)){if(u-f>0){t.currentPosition=t.movePanel(t.element,t.options,1,true,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(0)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}}else{t.currentPosition=t.movePanel(t.element,t.options,-1,true,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(0)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}}}},false)}this.options.onSetupComplete(this,e(this.element).find(this.options.panel+":eq("+this.currentPosition+")"));if(this.options.autoScroll){this.timerval=setInterval(function(){t.currentPosition=t.movePanel(t.element,t.options,1,false,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(1)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}},this.options.wait)}},movePanel:function(t,n,r,i,s){if(i){clearInterval(this.timerval)}var o=0;o=this.currentPosition;if(n.autoScroll||i){o+=r;if(s>-1){o=s}if(o<0){o=this.elements-1}if(o>=this.elements){o=0}if(o!=this.currentPosition){if(n.infinite){if(r==1){e(t).find(n.panel+".hidden:eq("+o+")").clone().insertAfter(e(t).find(n.panel+".infinite")).removeClass("hidden").show();if(n.vertical){e(t).find(".scroller").animate({top:this.panelHeight*-1},function(){e(t).find(n.panel+".infinite").next(n.panel).addClass("infinite").prev(n.panel).remove();e(this).css({top:0})})}else{e(t).find(".scroller").animate({left:this.panelWidth*-1},function(){e(t).find(n.panel+".infinite").next(n.panel).addClass("infinite").prev(n.panel).remove();e(this).css({left:0})})}}else{e(t).find(n.panel+".hidden:eq("+o+")").clone().insertBefore(e(t).find(n.panel+".infinite")).removeClass("hidden").show();if(n.vertical){e(t).find(".scroller").css({top:this.panelHeight*-1});e(t).find(".scroller").animate({top:0},function(){e(t).find(n.panel+".infinite").prev(n.panel).addClass("infinite").next(n.panel).remove()})}else{e(t).find(".scroller").css({left:this.panelWidth*-1});e(t).find(".scroller").animate({left:0},function(){e(t).find(n.panel+".infinite").prev(n.panel).addClass("infinite").next(n.panel).remove()})}}}else{switch(n.animation){case"slide":var u=o;if(n.panelsPerScreen>1){if(o+(n.panelsPerScreen-1)>=this.elements){u=this.elements-n.panelsPerScreen}}if(n.vertical){e(t).find(".scroller").animate({top:u*this.panelHeight*-1})}else{e(t).find(".scroller").animate({left:u*this.panelWidth*-1})}break;default:e(t).children(n.panel+":eq("+this.currentPosition+")").fadeOut(n.speed);e(t).children(n.panel+":eq("+o+")").fadeIn(n.speed)}}if(n.showMarkers){e(t).children(n.markerHolderClass).children("li").children("a").removeClass(n.markerActiveClass);e(t).children(n.markerHolderClass).children("li:eq("+o+")").children("a").addClass(n.markerActiveClass)}}if(i&&n.resumeOnClick){this.options.autoScroll=true;var a=this;this.timerval=setInterval(function(){a.currentPosition=a.movePanel(t,n,1,false,-1);if(a.options.infinite){a.options.onSlideChange(a,e(a.element).find(a.options.panel+":eq(0)"))}else{a.options.onSlideChange(a,e(a.element).find(a.options.panel+":eq("+a.currentPosition+")"))}},n.wait)}}return o},resize:function(){this.panelWidth=e(this.element).width();this.panelHeight=this.panelWidth*this.sizeRatio;e(this.element).find(this.options.panel).width(this.panelWidth).height(this.panelHeight);e(this.element).find(".mask").width(this.panelWidth).height(this.panelHeight);e(this.element).find(".scroller").width(this.panelWidth*this.elements+20).height(this.panelHeight)},pause:function(){this.options.autoScroll=false},play:function(){var t=this;this.options.autoScroll=true;if(this.timerval==null){this.timerval=setInterval(function(){t.currentPosition=t.movePanel(t.element,t.options,1,false,-1);if(t.options.infinite){t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq(0)"))}else{t.options.onSlideChange(t,e(t.element).find(t.options.panel+":eq("+t.currentPosition+")"))}},t.options.wait)}},next:function(){plugin.currentPosition=plugin.movePanel(plugin.element,plugin.options,1,false,-1);if(plugin.options.infinite){plugin.options.onSlideChange(plugin,e(plugin.element).find(plugin.options.panel+":eq(1)"))}else{plugin.options.onSlideChange(plugin,e(plugin.element).find(plugin.options.panel+":eq("+plugin.currentPosition+")"))}},previous:function(){plugin.currentPosition=plugin.movePanel(plugin.element,plugin.options,-1,true,-1);if(plugin.options.infinite){plugin.options.onSlideChange(plugin,e(plugin.element).find(plugin.options.panel+":eq(0)"))}else{plugin.options.onSlideChange(plugin,e(plugin.element).find(plugin.options.panel+":eq("+plugin.currentPosition+")"))}},gotoSlide:function(t){if(t>=this.elements||t<0){t=0}this.currentPosition=t;switch(this.options.animation){case"slide":if(this.options.infinite){e(this.element).find(this.options.panel+".infinite").remove();e(this.element).find(this.options.panel).eq(this.currentPosition).clone().insertBefore(e(this.element).find(this.options.panel+":first")).removeClass("hidden").addClass("infinite").show();this.options.onSlideChange(this,e(this.element).find(this.options.panel+".infinite"))}else{var n=t;if(this.options.panelsPerScreen>1){if(t+(this.options.panelsPerScreen-1)>=this.elements){n=this.elements-this.options.panelsPerScreen}}if(this.options.vertical){e(this.element).find(".scroller").css("top",this.panelHeight*n-1+"px")}else{e(this.element).find(".scroller").css("left",this.panelWidth*n*-1+"px")}this.options.onSlideChange(this,e(this.element).find(this.options.panel+":eq("+this.currentPosition+")"))}break;default:e(this.element).children(this.options.panel+":not(:eq("+this.currentPosition+"))").hide()}}};e.fn.panels=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),i=r.data("Panels");if(!i){r.data("Panels",new u(this,t))}else{if(typeof t==="string"){i[t].apply(i,n)}}})}})(jQuery,window,document)