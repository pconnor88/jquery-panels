(function(e,t,n,r){function u(n,r){this.element=n;this.options=e.extend({},o,r);this._defaults=o;this._name=s;this.elements=e(this.element).find(this.options.panel).size();this.panelWidth=e(this.element).find(this.options.panel).outerWidth(true);this.panelHeight=e(this.element).find(this.options.panel).outerHeight(true);this.sizeRatio=this.panelHeight/this.panelWidth;if(this.options.responsive){e(this.element).width("100%");this.resize();var i=this;e(t).resize(function(e){i.resize()})}this.currentPosition=this.options.start;this.timerval=null;this.init()}var s="panels",o={panel:"",animation:"fade",speed:2e3,wait:6e3,start:0,resumeOnClick:true,autoScroll:true,infinite:false,panelsPerScreen:1,panelsToMove:1,vertical:false,responsive:false,showArrows:false,leftArrowClass:"arrowLeft",leftArrowImage:"",rightArrowClass:"arrowRight",rightArrowImage:"",showMarkers:false,markerHolderClass:"",markerClass:"",morkerPosition:"sw",showMarkerNumbers:false,onSetupComplete:function(e,t){},onSlideChange:function(e,t){}};u.prototype={init:function(){var t=this;if(this.currentPosition>=this.elements||this.currentPosition<0){this.currentPosition=0}e(this.element).css({position:"relative"});switch(this.options.animation){case"slide":if(this.options.vertical){e(this.element).children(this.options.panel).wrapAll('<div class="mask" style="position:relative; overflow:hidden; width: '+this.panelWidth+"px; height: "+this.panelHeight*this.options.panelsPerScreen+'px;"><div class="scroller" style="position:absolute; zoom:1; width: '+this.panelWidth+"px; height: "+(this.panelHeight*this.elements+20)+'px;"></div></div>');e(this.element).find(".scroller").css("top",this.panelHeight*this.currentPosition*-1+"px");e(this.element).find(this.options.panel).css({position:"relative"});e(this.element).css({height:this.panelHeight*this.options.panelsPerScreen,width:this.panelWidth})}else{e(this.element).children(this.options.panel).wrapAll('<div class="mask" style="position:relative; overflow:hidden; width: '+this.panelWidth*this.options.panelsPerScreen+"px; height: "+this.panelHeight+'px;"><div class="scroller" style="position:absolute; zoom:1; width: '+(this.panelWidth*this.elements+20)+"px; height: "+this.panelHeight+'px;"></div></div>');e(this.element).find(".scroller").css("left",this.panelWidth*this.currentPosition*-1+"px");e(this.element).find(this.options.panel).css({position:"relative","float":"left"});e(this.element).css({width:this.panelWidth*this.options.panelsPerScreen,height:this.panelHeight})}if(this.options.infinite){e(this.element).find(this.options.panel).addClass("hidden").hide();e(this.element).find(this.options.panel).eq(this.currentPosition).clone().insertBefore(e(this.element).find(this.options.panel+":first")).removeClass("hidden").addClass("infinite").show()}break;default:e(this.element).css({width:this.panelWidth,height:this.panelHeight}).children(this.options.panel).css({position:"absolute",top:"0px",left:"0px"}).not(":eq("+this.currentPosition+")").hide()}if(this.options.showArrows){if(this.elements>1){var n="";var r="";if(this.options.leftArrowImage.length>0){n='<img src="'+this.options.leftArrowImage+'" alt="Previous slide" />'}if(this.options.rightArrowImage.length>0){r='<img src="'+this.options.rightArrowImage+'" alt="Next slide" />'}var s='<a class="pnl-arrow-left '+this.options.leftArrowClass+'" href="#">'+n+'</a><a class="pnl-arrow-right '+this.options.rightArrowClass+'" href="#">'+r+"</a>";e(this.element).append(s);e(this.element).children(".pnl-arrow-left").click(function(){t.currentPosition=t.movePanel(t.element,t.options,-1,true,-1);return false});e(this.element).children(".pnl-arrow-right").click(function(){t.currentPosition=t.movePanel(t.element,t.options,1,true,-1);return false})}}if(this.options.showMarkers){if(this.elements>1){var o='<ul class="pnl-markers'+this.options.markerHolderClass+'" style="padding:0px; list-style:none;">';for(i=0;i<this.elements;i++){o+='<li style="float:left"><a href="#" class="'+this.options.markerClass+'">';if(this.options.showMarkerNumbers){o+=i+1}o+="</a></li>"}o+="</ul>";e(this.element).append(o);var u=e(this.element).children(".pnl-markers").children("li").outerWidth(true);var a=e(this.element).children(".pnl-markers").children("li").outerHeight(true);switch(this.options.morkerPosition){case"n":e(this.element).children(".pnl-markers").css({position:"absolute",top:"0px",left:"50%",marginLeft:u*this.elements/2*-1});break;case"ne":e(this.element).children(".pnl-markers").css({position:"absolute",top:"0px",right:"0px"});break;case"e":e(this.element).children(".pnl-markers").css({position:"absolute",right:"0px",top:"50%",marginTop:a/2*-1});break;case"se":e(this.element).children(".pnl-markers").css({position:"absolute",bottom:"0px",right:"0px"});break;case"s":e(this.element).children(".pnl-markers").css({position:"absolute",bottom:"0px",left:"50%",marginLeft:u*this.elements/2*-1});break;case"w":e(this.element).children(".pnl-markers").css({position:"absolute",left:"0px",top:"50%",marginTop:a/2*-1});break;case"nw":e(this.element).children(".pnl-markers").css({position:"absolute",top:"0px",left:"0px"});break;default:e(this.element).children(".pnl-markers").css({position:"absolute",bottom:"0px",left:"0px"})}this.options.markerHolderClass="."+this.options.markerHolderClass;e(this.element).children(".pnl-markers").children("li:eq("+this.currentPosition+")").addClass("active");e(this.element).children(".pnl-markers").children("li").children("a").click(function(){var n=e(this).parent("li");var r=e(t.element).children(".pnl-markers").children("li").index(n);t.currentPosition=t.movePanel(t.element,t.options,1,true,r);return false})}}var f,l,c,h,p;if(this.element.addEventListener){this.element.addEventListener("touchstart",function(e){f=e.changedTouches[0].pageX;l=e.changedTouches[0].pageY},false);this.element.addEventListener("touchmove",function(e){c=e.changedTouches[0].pageX;h=e.changedTouches[0].pageY;if(Math.abs(c-f)>Math.abs(h-l)){e.preventDefault()}},false);this.element.addEventListener("touchend",function(e){if(Math.abs(f-c)>Math.abs(l-h)){if(f-c>0){t.currentPosition=t.movePanel(t.element,t.options,1,true,-1)}else{t.currentPosition=t.movePanel(t.element,t.options,-1,true,-1)}}},false)}if(this.options.autoScroll){this.timerval=setInterval(function(){t.currentPosition=t.movePanel(t.element,t.options,1,false,-1)},this.options.wait)}this.options.onSetupComplete(this,e(this.element).find(this.options.panel+":eq("+this.currentPosition+")"))},movePanel:function(t,n,r,i,s){var o=this.currentPosition;if(i||!e(t).children(n.panel+":eq("+o+")").is(":animated")&&n.animation=="fade"||!e(t).find(".scroller").is(":animated")&&n.animation=="slide"){if(i){clearInterval(this.timerval)}if(n.autoScroll||i){o+=r;if(s>-1){o=s}if(o<0){o=this.elements-1}if(o>=this.elements){o=0}if(o!=this.currentPosition){if(n.infinite){if(r==1){e(t).find(n.panel+".hidden:eq("+o+")").clone().insertAfter(e(t).find(n.panel+".infinite")).removeClass("hidden").show();if(n.vertical){e(t).find(".scroller").animate({top:this.panelHeight*-1},function(){e(t).find(n.panel+".infinite").next(n.panel).addClass("infinite").prev(n.panel).remove();e(this).css({top:0})})}else{e(t).find(".scroller").animate({left:this.panelWidth*-1},function(){e(t).find(n.panel+".infinite").next(n.panel).addClass("infinite").prev(n.panel).remove();e(this).css({left:0})})}}else{e(t).find(n.panel+".hidden:eq("+o+")").clone().insertBefore(e(t).find(n.panel+".infinite")).removeClass("hidden").show();if(n.vertical){e(t).find(".scroller").css({top:this.panelHeight*-1});e(t).find(".scroller").animate({top:0},function(){e(t).find(n.panel+".infinite").prev(n.panel).addClass("infinite").next(n.panel).remove()})}else{e(t).find(".scroller").css({left:this.panelWidth*-1});e(t).find(".scroller").animate({left:0},function(){e(t).find(n.panel+".infinite").prev(n.panel).addClass("infinite").next(n.panel).remove()})}}}else{switch(n.animation){case"slide":var u=o;if(n.panelsPerScreen>1){if(o+(n.panelsPerScreen-1)>=this.elements){u=this.elements-n.panelsPerScreen}}if(n.vertical){e(t).find(".scroller").animate({top:u*this.panelHeight*-1})}else{e(t).find(".scroller").animate({left:u*this.panelWidth*-1})}break;default:e(t).children(n.panel+":eq("+this.currentPosition+")").fadeOut(n.speed);e(t).children(n.panel+":eq("+o+")").fadeIn(n.speed)}}if(n.showMarkers){e(t).children(".pnl-markers").children("li").removeClass("active");e(t).children(".pnl-markers").children("li:eq("+o+")").addClass("active")}}if(i&&n.resumeOnClick){this.options.autoScroll=true;var a=this;this.timerval=setInterval(function(){a.currentPosition=a.movePanel(t,n,1,false,-1)},n.wait)}}if(n.infinite){n.onSlideChange(this,e(t).find(n.panel+":eq(0)"))}else{n.onSlideChange(this,e(t).find(n.panel+":eq("+this.currentPosition+")"))}}return o},resize:function(){this.panelWidth=e(this.element).width();this.panelHeight=this.panelWidth*this.sizeRatio;e(this.element).find(this.options.panel).width(this.panelWidth).height(this.panelHeight);e(this.element).find(".mask").width(this.panelWidth).height(this.panelHeight);e(this.element).find(".scroller").width(this.panelWidth*this.elements+20).height(this.panelHeight)},pause:function(){this.options.autoScroll=false},play:function(){var e=this;this.options.autoScroll=true;if(this.timerval==null){this.timerval=setInterval(function(){e.currentPosition=e.movePanel(e.element,e.options,1,false,-1)},e.options.wait)}},next:function(){plugin.currentPosition=plugin.movePanel(plugin.element,plugin.options,1,false,-1)},previous:function(){plugin.currentPosition=plugin.movePanel(plugin.element,plugin.options,-1,true,-1)},gotoSlide:function(t){if(slideNumber>=this.elements||slideNumber<0){slideNumber=0}this.currentPosition=slideNumber;switch(this.options.animation){case"slide":if(this.options.infinite){e(this.element).find(this.options.panel+".infinite").remove();e(this.element).find(this.options.panel).eq(this.currentPosition).clone().insertBefore(e(this.element).find(this.options.panel+":first")).removeClass("hidden").addClass("infinite").show();this.options.onSlideChange(this,e(this.element).find(this.options.panel+".infinite"))}else{var n=slideNumber;if(this.options.panelsPerScreen>1){if(slideNumber+(this.options.panelsPerScreen-1)>=this.elements){n=this.elements-this.options.panelsPerScreen}}if(this.options.vertical){e(this.element).find(".scroller").css("top",this.panelHeight*n-1+"px")}else{e(this.element).find(".scroller").css("left",this.panelWidth*n*-1+"px")}this.options.onSlideChange(this,e(this.element).find(this.options.panel+":eq("+this.currentPosition+")"))}break;default:e(this.element).children(this.options.panel+":not(:eq("+this.currentPosition+"))").hide()}}};e.fn.panels=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),i=r.data("Panels");if(!i){r.data("Panels",new u(this,t))}else{if(typeof t==="string"){i[t].apply(i,n)}}})}})(jQuery,window,document)